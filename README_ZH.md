# ChatGPT Web Midjourney Proxy
ğŸ’¡**å£°æ˜**
- æ­¤é¡¹ç›®åªå‘å¸ƒäº GitHubï¼ŒåŸºäº MIT åè®®ï¼Œå…è´¹ä¸”ä½œä¸ºå¼€æºå­¦ä¹ ä½¿ç”¨ã€‚å¹¶ä¸”ä¸ä¼šæœ‰ä»»ä½•å½¢å¼çš„å–å·ã€ä»˜è´¹æœåŠ¡ã€è®¨è®ºç¾¤ã€è®¨è®ºç»„ç­‰è¡Œä¸ºã€‚è°¨é˜²å—éª—ã€‚
- æœ¬å¼€æºæ˜¯åœ¨ [ChenZhaoYu](https://github.com/Chanzhaoyu/chatgpt-web) åŸºç¡€ä¸ŠåšäºŒæ¬¡å¼€å‘ ï¼›ä½¿ç”¨ [midjourney-proxy](https://github.com/novicezk/midjourney-proxy) æä¾›çš„midjourney apiå’Œ [Suno-API](https://github.com/SunoAI-API/Suno-API)  ä½œä¸ºåç«¯è€Œå½¢æˆçš„ï¼›


![cover](./docs/mj2a1.jpg)
## æ”¯æŒåŠŸèƒ½ 
- [x] æ”¯æŒ suno å•ç‹¬æ¨¡å—ï¼Œå¯æ­Œè¯è°ƒæ•´ æ›²é£è°ƒæ•´
- [x] åŸchatgpt web æ‰€æœ‰åŠŸèƒ½
- [x] chatgpt web æ”¯æŒè‡ªå®šä¹‰api keyã€base_url
- [x] midjourney æ–‡ç”Ÿå›¾
- [x] midjourney å«å›¾+æ–‡ç”Ÿå›¾  
- [X] midjourney å›¾å˜ U1åˆ°U4 ã€ V1åˆ°V4ã€é‡ç»˜ç­‰æ“ä½œ
- [X] midjourney æ”¯æŒå±€éƒ¨é‡ç»˜
- [X] midjourney æ”¯æŒ1.5å€å˜ç„¦ 2å€å˜ç„¦
- [X] midjourney æ”¯æŒ2å€é«˜æ¸… 4å€é«˜æ¸…
- [X] midjourney æ”¯æŒå·¦ã€å³ã€ä¸Šã€ä¸‹å»¶ä¼¸å˜åŒ–
- [X] midjourney åŒæ—¶æ”¯æŒ[midjourney-proxy](https://github.com/novicezk/midjourney-proxy) æ¥å£ å’Œ [midjourney-proxy-plus](https://github.com/litter-coder/midjourney-proxy-plus) æ¥å£
- [X] midjourney å›¾ç”Ÿæ–‡
- [X] å›¾ç‰‡ä½¿ç”¨localforageå®ç°æœ¬åœ°å­˜å‚¨
- [X] æ”¯æŒmidjourneyã€niji ä¸åŒæœºå™¨äºº
- [X] æ”¯æŒ[InsightFace äººè„¸æ›¿æ¢](https://discord.com/api/oauth2/authorize?client_id=1090660574196674713&permissions=274877945856&scope=bot)
- [X] midjourney æ··å›¾
- [X] midjourney è·å– seed
- [X] dall-e-3 ç”»å›¾
- [X] chatgpt å‰ç«¯é€‰æ‹©æ¨¡å‹
- [X] chatgpt å‰ç«¯æ”¯æŒè‡ªå®šä¹‰æ¨¡å‹ã€ä¸Šä¸‹æ–‡å¯¹è¯æ•°ã€å›å¤æ•°
- [X] chatgpt æ”¯æŒå›¾ç‰‡ä¸Šä¼ å›¾ç‰‡ ä¾›gpt-4-vision-previewä½¿ç”¨
- [X] chatgpt æ”¯æŒæ–‡ä»¶åç«¯ä¸Šä¼ ï¼ˆä¾›ç»™gpt-4-all gpt-4-gizmo-xxx æ¨¡å‹ï¼‰ï¼ é»˜è®¤æ˜¯å…³é—­çš„ æ‰“å¼€éœ€è¦ç¯å¢ƒå˜é‡ API_UPLOADER=1
- [X] chatgpt æ”¯æŒé€†å‘æ¨¡å‹ gpt-4-all gpt-4-v gpt-4-gizmo-(gizmo_id)
- [X] chatgpt æ”¯æŒè¶…é“¾æ¨¡å‹åˆ‡æ¢ https://vercel.ddaiai.com/#/m/gpt-4-all https://vercel.ddaiai.com/#/m/gpt-4-gizmo-g-2fkFE8rbu
- [X] æ”¯æŒChatGPTè¯•çš„è¶…é“¾æ¨¡å‹åˆ‡æ¢ https://chat.openai.com/g/g-2fkFE8rbu ä¿®æ”¹ä¸º https://vercel.ddaiai.com/#/g/g-2fkFE8rbu
- [X] chatgpt æ”¯æŒ GPTs å¤šæ¨¡æ€
- [X] chatgpt æ”¯æŒ tts whisper
- [X] å³æ—¶è¯­éŸ³è¯†åˆ«(æµè§ˆå™¨è‡ªå¸¦è¯­éŸ³è¯†åˆ« ASR) `v2.15.7`ä»¥ä¸Šç‰ˆæœ¬
- [X] æ”¯æŒè¶…é“¾æ›´æ¢è®¾ç½®ï¼Œé€‚åˆ`one-api` `new-api`éƒ¨ç½²èŠå¤© https://vercel.ddaiai.com/#/s/t?OPENAI_API_BASE_URL=https://abc.com&OPENAI_API_KEY=sk-xxxxx&MJ_SERVER=https://abc.com&MJ_API_SECRET=sk-xxx&UPLOADER_URL=
- [X] æ”¯æŒ`one-api`ã€`new-api`éƒ¨ç½²èŠå¤© https://vercel.ddaiai.com/#/?settings={%22key%22:%22sk-abc%22,%22url%22:%22https://www.abc.com%22} `(v.2.14.3)`

## æ— æœåŠ¡å™¨-ä¸ªäººæ¡Œé¢å®‰è£…
> - [x] è¯·åˆ° https://github.com/Dooy/chatgpt-web-midjourney-proxy/releases ä¸‹è½½æœ€æ–°ç‰ˆæœ¬å®‰è£…(é€‰æ‹©åˆé€‚ä½ æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬)
> - [x] é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ä¸­è½¬æœåŠ¡å•†( æœ€å¥½éƒ½æ”¯æŒ `gpt`, `gpts`, `midjourney`, `claude`, `suno` )
> - [x] ä¸­è½¬æœåŠ¡å•†æ¨è https://www.openai-hk.com ä¸€ä¸ª`key`å’Œ`apiæ¥å£åœ°å€` åŒæ—¶æ”¯æŒ `gpt` `midjourney` `claude` `suno`ï¼Œmj-fastæœ€ä½èƒ½åˆ°0.12rmb/å¼ 
![å¤šæ¨¡æ€](./docs/suno-ds.jpg)

## Vercel ä¸€é”®éƒ¨ç½²

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/Dooy/chatgpt-web-midjourney-proxy&env=OPENAI_API_BASE_URL&env=OPENAI_API_KEY&env=MJ_SERVER&env=MJ_API_SECRET&project-name=chatgpt-web-midjourney-proxy&repository-name=chatgpt-web-midjourney-proxy)

## env ç¯å¢ƒå˜é‡

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ |dockerç­‰éƒ¨ç½²| vercel éƒ¨ç½²|
| --- | --- | --- | --- | --- |
| OPENAI_API_BASE_URL | OpenAI API æ¥å£åœ°å€ | https://api.openai.com | âœ… |  âœ…|
| OPENAI_API_KEY | OpenAI API å¯†é’¥ |  sk-xxxxx | âœ… |  âœ…|
| OPENAI_API_MODEL |  é»˜è®¤æ¨¡å‹ | gpt-3.5-turbo  | âœ… |  âœ…|
| MJ_SERVER |  mj proxy æ¥å£åœ°å€  |[æ­å»ºå‚è€ƒ](https://github.com/novicezk/midjourney-proxy) | âœ… |  âœ…|
| MJ_API_SECRET |  mj proxy | ç©º  | âœ… |  âœ…|
| SUNO_SERVER |  SUNO API æ¥å£åœ°å€  | [æ­å»ºå‚è€ƒ](https://github.com/SunoAI-API/Suno-API) | âœ… |  âœ…|
| SUNO_KEY |  SUNO API çš„key | ç©º  | âœ… |  âœ…|
| AUTH_SECRET_KEY |  è®¿é—®æˆæƒå¯†ç  | æ—   | âœ… |   x|
| API_UPLOADER |  æ”¯æŒä¸Šä¼  | å…³é—­  | âœ… |  x|
| HIDE_SERVER |  å‰ç«¯uiéšè—æœåŠ¡ç«¯|    | âœ… |  x|
| CUSTOM_MODELS |  è‡ªå®šä¹‰å¯é€‰æ¨¡å‹ | æ—   | âœ… |  âœ…|
| TJ_BAIDU_ID |  ç™¾åº¦ç»Ÿè®¡ID | æ—   | âœ… |  âœ…|
| TJ_GOOGLE_ID |  è°·æ­Œç»Ÿè®¡ID | æ—   | âœ… |  âœ…|
| SYS_NOTIFY |  ç³»ç»Ÿé€šçŸ¥ï¼Œæ”¯æŒHTML | æ—   | âœ… |  âœ…|
| DISABLE_GPT4 |  ç¦ç”¨GPT-4 | æ—   | âœ… |  âœ…|
| GPT_URL | è‡ªå®š GPT_URL=/gpts.json  | æ—  ä¹Ÿå¯è‡ªå·±çš„å¤–é“¾ | âœ… |  âœ…|
| UPLOAD_IMG_SIZE | gpt4v ä¸Šä¼ å›¾ç‰‡å¤§å° |  1 | âœ… |  âœ…|
| SYS_THEME | é»˜è®¤ä¸»é¢˜ `light`æˆ–è€…`dark`  | dark | âœ… |  âœ…|
| MJ_IMG_WSRV | æ˜¯å¦å¼€å¯ `wsrv`å›¾åºŠ  | æ— (å…³é—­)  | âœ… |  âœ…|
| AUTH_SECRET_ERROR_COUNT | é˜²çˆ†ç ´éªŒè¯ï¼šéªŒè¯æ¬¡æ•°è§¦å‘ NGINX è¯·è®¾ç½® `proxy_set_header   X-Forwarded-For  $remote_addr`  | æ—   | âœ… |  x|
| AUTH_SECRET_ERROR_TIME | é˜²çˆ†ç ´éªŒè¯ï¼šåœç•™æ—¶é—´ å•ä½åˆ†é’Ÿ  | æ—   | âœ… |  x|
| CLOSE_MD_PREVIEW | æ˜¯å¦ä¸å…³é—­è¾“å…¥é¢„è§ˆ | æ—   | âœ… |  âœ…|
| UPLOAD_TYPE | æŒ‡å®šä¸Šä¼ æ–¹å¼ [`R2` R2ä¸Šä¼ ] [`API` è·ŸéšUIå‰ç«¯ä¸­è½¬]ã€[`Container` æœ¬åœ°å®¹å™¨]ã€[`MyUrl` è‡ªå®šä¹‰é“¾æ¥]  |  ç©º | âœ… |  x|
| MENU_DISABLE  | èœå•ç¦ç”¨ å¯é€‰:gpts,draws,gallery,music |  ç©º | âœ… |  âœ…|
| VISION_MODEL  | é»˜è®¤ä½¿ç”¨çš„è¯†å›¾ å¯é€‰:`gpt-4o`,`gpt-4-turb`,`gpt-4-vision-preview`ç­‰ |  ç©º | âœ… |  âœ…|
| SYSTEM_MESSAGE  | è‡ªå®šä¹‰é»˜è®¤è§’è‰²æ¶ˆæ¯ |  ç©º | âœ… |  âœ…|
| CUSTOM_VISION_MODELS  | è‡ªå®šä¹‰å¯è§†å›¾æ¨¡å‹ ç”¨`,` åˆ†å¼€ |  ç©º | âœ… |  âœ…|

  

## docker éƒ¨ç½²
 
> - [x] éœ€ [midjourney-proxy](https://github.com/novicezk/midjourney-proxy)   æ”¯æŒ
> - [x] éœ€ [Suno-API](https://github.com/SunoAI-API/Suno-API)  æ”¯æŒ


```bash
docker run --name chatgpt-web-midjourney-proxy  -d -p 6015:3002 \
-e OPENAI_API_KEY=sk-xxxxx \
-e OPENAI_API_BASE_URL=https://api.openai.com  \
-e MJ_SERVER=https://your-mj-server:6013  \
-e MJ_API_SECRET=your-mj-api-secret  \
-e SUNO_SERVER=https://your-suno-server:8000  \
-e SUNO_KEY=you-suno-key  ydlhero/chatgpt-web-midjourney-proxy
```
è®¿é—® http://ip:6015 

**æ–‡ä»¶ä¸Šä¼ **: 
```bash
docker run --name chatgpt-web-midjourney-proxy  -d -p 6015:3002 \
-e OPENAI_API_KEY=sk-xxxxx \
-e OPENAI_API_BASE_URL=https://api.openai.com  \
-e MJ_SERVER=https://172.17.0.1:6013  \
-e API_UPLOADER=1  -v /data/uploads:/app/uploads \
-e MJ_API_SECRET=abc123456  ydlhero/chatgpt-web-midjourney-proxy
```
å¦‚æœæ˜¯å‰ç«¯uiè®¾ç½® OPENAI_API_KEY OPENAI_API_BASE_URL ; å›¾ç‰‡ä¸Šä¼ ä¹Ÿä¼šéšç€èµ° OPENAI_API_BASE_URLèµ°
```shell
curl -X POST -H "Content-Type: multipart/form-data" -F "file=@/path/to/file" http://OPENAI_API_BASE_URL/v1/upload
```
è¿”å›æ ¼å¼
```json
{
"url":"https://xxxxxxx.jpg"
}
```

### midjourney-proxy API dockeréƒ¨ç½²
æ›´å¤šå‚è€ƒåˆ° [midjourney-proxy](https://github.com/novicezk/midjourney-proxy) å¼€æºå…‰å…‰
```bash
docker run -d --name mj6013  -p 6013:8080  \
-e mj.discord.guild-id=discordæœåŠ¡ID  \
-e mj.discord.channel-id=discordæœåŠ¡ç»„ID   \
-e mj.queue.timeout-minutes=6 \
-e mj.api-secret=abc123456 \
-e mj.discord.user-token=**********  \
--restart=always novicezk/midjourney-proxy:2.5.5
```


## æ›´å¤šå±•ç¤º

### è‡ªå®šä¹‰æœåŠ¡ç«¯api keyã€base_urlï¼š
![base_url](./docs/gptbase.jpg)

### GPTS  GTP Store 
![å¤šæ¨¡æ€](./docs/gpts.jpg)
![å¤šæ¨¡æ€](./docs/gpts1.jpg)

### suno éŸ³ä¹åˆ¶ä½œ
![suno](./docs/suno.jpg)


### å½•éŸ³ whisper  å’Œ  tts
![whisper--tts](./docs/tts-whisper.png)

### å±€éƒ¨é‡ç»˜ï¼š
[![å±€éƒ¨é‡ç»˜](./docs/mj2.jpg)](./docs/mj2.jpg)

### æ¢è„¸
![æ¢è„¸](./docs/mj2a2.jpg)

### æ··å›¾
![æ··å›¾](./docs/mj2a3.jpg)

### æ”¯æŒå›¾ç‰‡ä¸Šä¼ å›¾ç‰‡ ä¾›gpt-4-vision-previewä½¿ç”¨
![æ··å›¾](./docs/mj4a1.png)
æ‰‹æœºç«¯ï¼š
<div style="display: flex; flex-wrap: wrap">
 <img src="./docs/mjs1.jpg" style="width:200px" >
 <img src="./docs/mjs2.jpg"  style="width:200px">
 <img src="./docs/mjs3.jpg"  style="width:200px">
</div>


## æ–‡ä»¶ä¸Šä¼  æ”¯æŒcloudflare r2 å­˜å‚¨

- cloudflare r2 å­˜å‚¨ 10 GB/æœˆ å…è´¹ https://www.cloudflare.com/zh-cn/developer-platform/r2/
- é…ç½®æ–‡æ¡£å‚è€ƒ https://zhuanlan.zhihu.com/p/658058503
- vercel ä¸æ”¯æŒ r2 å­˜å‚¨
```yml
R2_DOMAIN=
R2_BUCKET_NAME=
R2_ACCOUNT_ID=
R2_KEY_ID=
R2_KEY_SECRET=
```
## æ–‡ä»¶æœåŠ¡å™¨è¯·æ±‚ä¼˜å…ˆé¡ºåº
R2> å‰ç«¯UIè®¾ç½®æ–‡ä»¶æœåŠ¡> åç«¯æ–‡ä»¶æœåŠ¡ >è·Ÿéšä¸­è½¬
## é˜²çˆ†ç ´éªŒè¯è®¾ç½®

![é˜²çˆ†ç ´](./docs/check_error.jpg)
- [x] vercel ä¸æ”¯æŒï¼›ä»…æ”¯æŒDockeråŒ–éƒ¨ç½²
- [x] å¦‚æœå‰é¢æŒ‚è½½ `nginx` è¯·é…ç½® `proxy_set_header   X-Forwarded-For  $remote_addr;`
- [x] å‚æ•°å¦‚ä¸‹: é”™è¯¯éªŒè¯3æ¬¡ï¼Œåªèƒ½åœ¨10åˆ†é’Ÿåå†éªŒè¯
```yml
# Secret key æ³¨æ„: åªèƒ½æ‹¿äº‹è‹±æ–‡+æ•°å­—
AUTH_SECRET_KEY=my888god
#çˆ†ç ´ï¼šéªŒè¯æ¬¡æ•° æ³¨æ„: æ•°å­— ï¼›nginx è¯·è®¾ç½®  proxy_set_header   X-Forwarded-For  $remote_addr;
AUTH_SECRET_ERROR_COUNT=3
#çˆ†ç ´ï¼šéªŒè¯åœç•™æ—¶é—´ å•ä½åˆ†é’Ÿ æ³¨æ„: æ˜¯æ•°å­—
AUTH_SECRET_ERROR_TIME=10
```
- [x] è„šæœ¬å¦‚ä¸‹
```shell
docker run --name chatgpt-web-midjourney-proxy  -d -p 6015:3002 \
-e OPENAI_API_KEY=sk-xxxxx \
-e OPENAI_API_BASE_URL=https://api.openai.com  \
-e MJ_SERVER=https://172.17.0.1:6013  \
-e MJ_API_SECRET=abc123456 \
-e API_UPLOADER=1  -v /data/uploads:/app/uploads \
-e AUTH_SECRET_KEY=ä½ çš„è‹±æ–‡å¯†ç  -e AUTH_SECRET_ERROR_COUNT=3 \
-e AUTH_SECRET_ERROR_TIME=10 ydlhero/chatgpt-web-midjourney-proxy
```
- 
## License
MIT Â© [Dooy](./license)

## å…¶ä»–
å¦‚æœè§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œè¯·å¸®å¿™ç‚¹ä¸ªstar æˆ–è€…æåŠ©æˆ‘ä»¬

[![Star History Chart](https://api.star-history.com/svg?repos=Dooy/chatgpt-web-midjourney-proxy&type=Date)](https://star-history.com/#Dooy/chatgpt-web-midjourney-proxy&Date)

## æåŠ©
å¦‚æœæˆ‘çš„å¼€æºé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘é€šè¿‡ä»¥ä¸‹ä»»æ„ä¸€ç§æ–¹å¼èµåŠ©: 
<br> `ä»˜æ¬¾å¤‡æ³¨ä¸Šæ‚¨çš„è”ç³»æ–¹å¼`
<div style="display: flex; flex-wrap: wrap">
    <div style="width:200px">
        <img src="./docs/wxpay.jpg"  style="width:200px">
        <div>å¾®ä¿¡æåŠ©</div>
    </div>
    <div style="width:200px">
        <img src="./docs/alipay.jpg"  style="width:200px"> 
        <div>æ”¯ä»˜å®æåŠ©</div>
    </div>
</div>